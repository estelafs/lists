<h3 mat-dialog-title>
  {{ data.item ? 'Edit item' : 'Create a new item' }}
</h3>

<mat-dialog-content>
  <form [formGroup]="itemFormGroup" class="flex flex-col">
    <mat-form-field>
      <mat-label>Name</mat-label>
      <input matInput formControlName="name" />
    </mat-form-field>

    <mat-form-field>
      <mat-label>Note</mat-label>
      <textarea matInput formControlName="note"></textarea>
    </mat-form-field>

    <div class="flex flex-row place-content-between">
      <mat-form-field>
        <mat-label>Quantity</mat-label>
        <input matInput type="number" formControlName="quantity" />
      </mat-form-field>
  
      <mat-form-field>
        <mat-label>Unit</mat-label>
        <mat-select formControlName="unit">
          <mat-option>none</mat-option>
          @for (unit of measuringUnits; track unit) {
            <mat-option [value]="unit">{{unit}}</mat-option>
          }
        </mat-select>
      </mat-form-field>
    </div>

    <mat-form-field>
      <mat-label>Category</mat-label>
      <mat-select formControlName="categoryId">
        <mat-option>none</mat-option>
        @for (category of categoryService.categories$ | async; track category) {
          <mat-option [value]="category.id">{{category.name}}</mat-option>
        }
      </mat-select>
    </mat-form-field>

    <button mat-stroked-button class="w-full mb-2" (click)="createCategory()">
      CREATE A NEW CATEGORY
    </button>
  </form>
</mat-dialog-content>

<mat-dialog-actions>
  <button mat-button mat-dialog-close>
    Cancel
  </button>
  <button
    mat-button
    [disabled]="itemFormGroup.pristine || itemFormGroup.invalid"
    [mat-dialog-close]="itemFormGroup.value"
  >
    {{ data.item ? 'Edit' : 'Create' }}
  </button>
</mat-dialog-actions>
